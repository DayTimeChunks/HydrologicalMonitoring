arrow = arrow(length = unit(0.01, 'npc'), type = "closed"),
force = 1,
point.padding = unit(0.5, 'lines'),
max.iter = 2e3,
nudge_x = .5, show.legend = F)
deltaTime
shiny::runApp('D:/Documents/these_pablo/Alteckendorf2016/InteractiveApps/Alteck-app')
knitr::opts_chunk$set(echo = TRUE)
library(vioplot)
# plot densities
sm.density.compare(weeklySoil$Conc.mug.g.dry.soil, weeklySoil$Transect, xlab=expression(paste("Conc. S-Meto.  ", {({mu}*g / g.soil.dry)})))
install.packages("vioplot")
knitr::opts_chunk$set(echo = TRUE)
library(vioplot)
library(sm)
# Soils
weeklySoil = read.csv2("Data/WeeklySoils_Rng.csv", na.strings=c('#DIV/0!', '', 'NA'), header = TRUE)
weeklySoil$Date.ti <- as.POSIXct(strptime(weeklySoil$Date.ti, "%Y-%m-%d %H:%M", tz="EST")) # csv typos, option 1
weeklySoil$Transect <- factor(weeklySoil$Transect, levels = c("N", "T", "S"))
# Date conversion correct:
sum(is.na(weeklySoil$Date.ti)) == 0
str(weeklySoil)
AOdf = read.csv2("Data/WeeklyHydroContam_R.csv")
AOdf$ti <- as.POSIXct(strptime(AOdf$ti, "%Y-%m-%d %H:%M", tz="EST"))
AOdf$Events <- factor(AOdf$Events, levels = unique(AOdf$Events))
AOdf$Event <- factor(AOdf$Event, levels = unique(AOdf$Event))
# Date conversion correct:
sum(is.na(AOdf$ti)) == 0
str(AOdf)
# plot densities
sm.density.compare(weeklySoil$Conc.mug.g.dry.soil, weeklySoil$Transect, xlab=expression(paste("Conc. S-Meto.  ", {({mu}*g / g.soil.dry)})))
title(main="Catchment Soil - Concentrations")
legend("topright", levels( weeklySoil$Transect), fill=2+(0:nlevels(weeklySoil$Transect)))
boxplot(Conc.mug.g.dry.soil~Transect,data=weeklySoil, main="Composite Soil Transects - Concentrations",
xlab="Transects", ylab=expression(paste("Conc. S-Meto.  ", {({mu}*g / g.soil.dry)})))
vioplot(na.omit(weeklySoil$comp.d13C),  names = "Catchment")
title(expression(paste({delta}^"13","C", ' (\u2030)')))
temp <- na.omit(weeklySoil)
sm.density.compare(temp$comp.d13C, temp$Transect,
xlab=expression(paste({delta}^"13","C", ' (\u2030)')))
title(main="Catchment Soil - Isotope Distribution")
legend("topright", levels( weeklySoil$Transect), fill=2+(0:nlevels(weeklySoil$Transect)))
boxplot(comp.d13C~Transect,data=weeklySoil, main="Composite Soil Transects - Isotopes",
xlab="Transects", ylab=expression(paste({delta}^"13","C", ' (\u2030)')))
library(dplyr)
library(ggplot2)
is_outlier <- function(x) {
return(x < quantile(x, 0.25) - 1.5 * IQR(x) | x > quantile(x, 0.75) + 1.5 * IQR(x))
}
mtcars %>%
group_by(cyl) %>%
mutate(outlier = ifelse(is_outlier(drat), drat, as.numeric(NA))) %>%
ggplot(., aes(x = factor(cyl), y = drat)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
head(mtcars)
weeklySoil %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(Conc.mug.g.dry.soil), Conc.mug.g.dry.soil, as.numeric(NA))) %>%
ggplot(., aes(x = factor(Transect), y = Conc.mug.g.dry.soil)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
head(weeklySoil)
weeklySoil %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(Conc.mug.g.dry.soil), ID, as.numeric(NA))) %>%
ggplot(., aes(x = factor(Transect), y = Conc.mug.g.dry.soil)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
head(weeklySoil)
weeklySoil %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(Conc.mug.g.dry.soil), as.character(ID), as.numeric(NA))) %>%
ggplot(., aes(x = factor(Transect), y = Conc.mug.g.dry.soil)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
vioplot(weeklySoil$Conc.mug.g.dry.soil,  names = "Catchment")
title(expression(paste("Conc. S-Meto.  ", {({mu}*g / g.soil.dry)})))
sm.density.compare(weeklySoil$Conc.mug.g.dry.soil, weeklySoil$Transect, xlab=expression(paste("Conc. S-Meto.  ", {({mu}*g / g.soil.dry)})))
title(main="Catchment Soil - Concentrations")
legend("topright", levels( weeklySoil$Transect), fill=2+(0:nlevels(weeklySoil$Transect)))
weeklySoil %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(comp.d13C), as.character(ID), as.numeric(NA))) %>%
ggplot(., aes(x = factor(Transect), y = comp.d13C)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
temp %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(comp.d13C), as.character(ID), as.numeric(NA))) %>%
ggplot(., aes(x = factor(Transect), y = comp.d13C)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
View(temp)
temp %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(comp.d13C), as.character(ID), as.numeric(NA))) %>%
ggplot(., aes(x = factor(Transect), y = comp.d13C)) +
geom_boxplot()
temp %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(comp.d13C), as.character(ID), as.numeric(NA)))
temp %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(Conc.mug.g.dry.soil), as.character(ID), as.numeric(NA))) %>%
ggplot(., aes(x = factor(Transect), y = comp.d13C)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
temp %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(Conc.mug.g.dry.soil), as.character(ID), as.numeric(NA))) %>%
ggplot(., aes(x = factor(Transect), y = Conc.mug.g.dry.soil)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
class(temp$Conc.mug.g.dry.soil)
class(temp$comp.d13C)
temp %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(DD13C.comp), as.character(ID), as.numeric(NA))) %>%
ggplot(., aes(x = factor(Transect), y = DD13C.comp)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
temp %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(DD13C.comp), as.character(ID), NA)) %>%
ggplot(., aes(x = factor(Transect), y = DD13C.comp)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
temp %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(comp.d13C), as.character(ID), NA)) %>%
ggplot(., aes(x = factor(Transect), y = comp.d13C)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
weeklySoil %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(Conc.mug.g.dry.soil), as.character(ID), as.numeric(NA))) %>%
ggplot(., aes(x = factor(Transect), y = Conc.mug.g.dry.soil)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
temp %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(comp.d13C), as.character(ID), NA)) %>%
ggplot(., aes(x = factor(Transect), y = comp.d13C)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
weeklySoil %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(Conc.mug.g.dry.soil), as.character(ID), as.numeric(NA))) %>%
ggplot(., aes(x = factor(Transect), y = Conc.mug.g.dry.soil)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
temp <- temp %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(comp.d13C), as.character(ID), NA)) %>%
ggplot(., aes(x = factor(Transect), y = comp.d13C)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
temp
temp <- na.omit(weeklySoil)
temp <- temp %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(comp.d13C), as.character(ID), NA))
temp <- temp %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(comp.d13C), as.character(ID), ifelse(is_outlier(Conc.mug.g.dry.soil), as.character(ID), NA)))
weeklySoil %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(Conc.mug.g.dry.soil), as.character(ID), as.numeric(NA))) %>%
ggplot(., aes(x = factor(Transect), y = Conc.mug.g.dry.soil)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
temp <- weeklySoil %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(comp.d13C), as.character(ID), ifelse(is_outlier(Conc.mug.g.dry.soil), as.character(ID), NA)))
temp <- na.omit(weeklySoil)
temp %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(comp.d13C), as.character(ID), NA)) %>%
ggplot(., aes(x = factor(Transect), y = comp.d13C)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
library(sm)
library(vioplot)
library(dplyr)
library(ggplot2)
knitr::opts_chunk$set(echo = TRUE)
library(sm)
library(vioplot)
library(dplyr)
library(ggplot2)
# Soils
weeklySoil = read.csv2("Data/WeeklySoils_Rng.csv", na.strings=c('#DIV/0!', '', 'NA'), header = TRUE)
weeklySoil$Date.ti <- as.POSIXct(strptime(weeklySoil$Date.ti, "%Y-%m-%d %H:%M", tz="EST")) # csv typos, option 1
weeklySoil$Transect <- factor(weeklySoil$Transect, levels = c("N", "T", "S"))
# Date conversion correct:
sum(is.na(weeklySoil$Date.ti)) == 0
str(weeklySoil)
AOdf = read.csv2("Data/WeeklyHydroContam_R.csv")
AOdf$ti <- as.POSIXct(strptime(AOdf$ti, "%Y-%m-%d %H:%M", tz="EST"))
AOdf$Events <- factor(AOdf$Events, levels = unique(AOdf$Events))
AOdf$Event <- factor(AOdf$Event, levels = unique(AOdf$Event))
# Date conversion correct:
sum(is.na(AOdf$ti)) == 0
str(AOdf)
boxplot(Conc.mug.g.dry.soil~Transect,data=weeklySoil, main="Composite Soil Transects - Concentrations",
xlab="Transects", ylab=expression(paste("Conc. S-Meto.  ", {({mu}*g / g.soil.dry)})))
is_outlier <- function(x) {
return(x < quantile(x, 0.25) - 1.5 * IQR(x) | x > quantile(x, 0.75) + 1.5 * IQR(x))
}
# Concentrations
weeklySoil %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(Conc.mug.g.dry.soil), as.character(ID), as.numeric(NA))) %>%
ggplot(., aes(x = factor(Transect), y = Conc.mug.g.dry.soil)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
# Isotopes
temp <- na.omit(weeklySoil)
boxplot(comp.d13C~Transect,data=weeklySoil, main="Composite Soil Transects - Isotopes",
xlab="Transects", ylab=expression(paste({delta}^"13","C", ' (\u2030)')))
temp %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(comp.d13C), as.character(ID), NA)) %>%
ggplot(., aes(x = factor(Transect), y = comp.d13C)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
temp <- temp %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(comp.d13C), as.character(ID), ifelse(is_outlier(Conc.mug.g.dry.soil), as.character(ID), NA)))
temp %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(comp.d13C), as.character(ID), NA)) %>%
ggplot(., aes(x = factor(Transect), y = comp.d13C)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
temp %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(Conc.mug.g.dry.soil), as.character(ID), NA)) %>%
ggplot(., aes(x = factor(Transect), y = Conc.mug.g.dry.soil)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
ggplot(temp, aes(x = factor(Transect), y = comp.d13C)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
ggplot(temp, aes(x = factor(Transect), y = Conc.mug.g.dry.soil)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
temp.filtered <- temp[is.na(temp$outlier ) , ]
View(temp.filtered)
cor.test(temp.filtered$comp.d13C, temp.filtered$Conc.mug.g.dry.soil)
cor.test(weeklySoil$comp.d13C,weeklySoil$Conc.mug.g.dry.soil)
# Concentrations
weeklySoil %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(Conc.mug.g.dry.soil), as.character(ID), as.numeric(NA))) %>%
ggplot(., aes(x = factor(Transect), y = Conc.mug.g.dry.soil)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
# Isotopes
temp <- na.omit(weeklySoil)
temp %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(comp.d13C), as.character(ID), NA)) %>%
ggplot(., aes(x = factor(Transect), y = comp.d13C)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
weeklySoil %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(Conc.mug.g.dry.soil), as.character(ID), as.numeric(NA))) %>%
ggplot(., aes(x = factor(Transect), y = Conc.mug.g.dry.soil)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
temp <- na.omit(weeklySoil)
temp %>%
group_by(Transect) %>%
mutate(outlier = ifelse(is_outlier(comp.d13C), as.character(ID), NA)) %>%
ggplot(., aes(x = factor(Transect), y = comp.d13C)) +
geom_boxplot() +
geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
View(weeklySoil)
View(AOdf)
knitr::opts_chunk$set(echo = TRUE, warning=FALSE, message = FALSE)
Sys.setlocale("LC_ALL", "English")
colnames(AOdf)[colnames(AOdf) == "ti"] <- "Date.ti"
soils.N <- subset(weeklySoil, soils$Transect == "N")
soils.N <- subset(weeklySoil, weeklySoil$Transect == "N")
soils.T <- subset(weeklySoil, weeklySoil$Transect == "T")
soils.S <- subset(weeklySoil, weeklySoil$Transect == "S")
knitr::opts_chunk$set(echo = TRUE, warning=FALSE, message = FALSE)
Sys.setlocale("LC_ALL", "English")
library(sm)
library(vioplot)
library(dplyr)
library(ggplot2)
WaterSoils <- merge(AOdf, soils.N, by = "Date.ti", all = T)
knitr::opts_chunk$set(echo = TRUE, warning=FALSE, message = FALSE)
Sys.setlocale("LC_ALL", "English")
library(sm)
library(vioplot)
library(dplyr)
library(ggplot2)
# Soils
weeklySoil = read.csv2("Data/WeeklySoils_Rng.csv",
na.strings=c('#DIV/0!', '', 'NA'), header = TRUE)
weeklySoil$Date.ti <- as.POSIXct(strptime(weeklySoil$Date.ti,
"%Y-%m-%d %H:%M", tz="EST")) # csv typos, option 1
weeklySoil$Transect <- factor(weeklySoil$Transect, levels = c("N", "T", "S"))
# Date conversion correct:
sum(is.na(weeklySoil$Date.ti)) == 0
# North
soils.N <- subset(weeklySoil, weeklySoil$Transect == "N")
soils.T <- subset(weeklySoil, weeklySoil$Transect == "T")
soils.S <- subset(weeklySoil, weeklySoil$Transect == "S")
str(weeklySoil)
AOdf = read.csv2("Data/WeeklyHydroContam_R.csv")
AOdf$ti <- as.POSIXct(strptime(AOdf$ti, "%Y-%m-%d %H:%M", tz="EST"))
colnames(AOdf)[colnames(AOdf) == "ti"] <- "Date.ti"
AOdf$Events <- factor(AOdf$Events, levels = unique(AOdf$Events))
AOdf$Event <- factor(AOdf$Event, levels = unique(AOdf$Event))
# Date conversion correct:
sum(is.na(AOdf$ti)) == 0
str(AOdf)
WaterSoils <- merge(AOdf, soils.N, by = "Date.ti", all = T)
WaterSoils <- merge(WaterSoils, soils.T, by = "Date.ti", all = T)
WaterSoils <- merge(WaterSoils, soils.S, by = "Date.ti", all = T)
View(WaterSoils)
View(soils.N)
WaterSoils <- merge(AOdf, soils.N, by = "Date.ti", all = T)
str(WaterSoils)
WaterSoils <- merge(AOdf, soils.N, by = "Date.ti", all = F)
str(WaterSoils)
dropSoil <- c("f.max.comp", "f.mean.comp", "f.min.comp", "Area.N", "Area.T", "Area.S", "ngC.SD","ngC.SE", "N_compsoil")
weeklySoil <- weeklySoil[ , !(names(weeklySoil) %in% dropSoil)]
dropSoil <- c("f.max.comp", "f.mean.comp", "f.min.comp", "Area.N", "Area.T", "Area.S", "ngC.SD","ngC.SE", "N_compsoil", "N_ngC")
weeklySoil <- weeklySoil[ , !(names(weeklySoil) %in% dropSoil)]
soils.N <- subset(weeklySoil, weeklySoil$Transect == "N")
Sys.setlocale("LC_ALL", "English")
library("plyr")
library("dplyr")
# setwd("D:/Documents/these_pablo/Alteckendorf2016/R")
# setwd("/Users/DayTightChunks/Documents/PhD/Routput/Alteck/R")
# setwd("D:/Documents/these_pablo/Alteckendorf2016/00_TransparencyFolder")
getwd()
outlet = read.csv2("Data/WeeklyHydroContam_R.csv", header = T)
outlet$ti <- as.POSIXct(outlet$ti, "%Y-%m-%d %H:%M", tz = "EST")
sum(is.na(outlet$ti))
# Select variables from Water dataset
outlet <- outlet[, c("ti", "WeekSubWeek", "Event", "B.diss", "B.filt", "CumOutDiss.g", "CumOutFilt.g", "CumAppMass.g", "CumOutMELsm.g")]
print("Water")
str(outlet)
soils = read.csv2("Data/WeeklySoils_Rng.csv", header =T) # Corrected with only ngC > 2.0
soils$Date.ti <- as.POSIXct(soils$Date.ti, "%Y-%m-%d %H:%M", tz = "EST")
#soils$Date.ti <- as.POSIXct(soils$Date.ti, "%d/%m/%Y %H:%M", tz = "EST")
sum(is.na(soils$Date.ti))
print("Soils")
str(soils)
View(soil)
View(soils)
View(soils)
soils = read.csv2("'Data/MassBalance_R.csv",
na.strings=c('#DIV/0!', '', 'NA'), header = TRUE)
getwd()
getwd()
setwd("D:/Documents/these_pablo/Alteckendorf2016/HydrologicalMonitoring")
getwd()
soils = read.csv2("'Data/MassBalance_R.csv",
na.strings=c('#DIV/0!', '', 'NA'), header = TRUE)
soils = read.csv2("Data/MassBalance_R.csv",
na.strings=c('#DIV/0!', '', 'NA'), header = TRUE)
soils$Date.ti <- as.POSIXct(strptime(soils$Date.ti,
"%Y-%m-%d %H:%M", tz="EST")) # csv typos, option 1
colnames(soils)[colnames(soils) == "ti"] <- "Date.ti"
soils$Date.ti <- as.POSIXct(strptime(soils$Date.ti,
"%Y-%m-%d %H:%M", tz="EST")) # csv typos, option 1
sum(is.na(soils$Date.ti)) == 0
dropSoil <- c("ID.N", "ID.T",
"f.max.comp", "f.mean.comp", "f.min.comp", "Area.N", "Area.T", "Area.S", "ngC.SD","ngC.SE", "N_compsoil", "N_ngC")
soils <- soils[ , !(names(soils) %in% dropSoil)]
str(weeklySoil)
str(soils)
AOdf = read.csv2("Data/WeeklyHydroContam_R.csv")
AOdf$ti <- as.POSIXct(strptime(AOdf$ti, "%Y-%m-%d %H:%M", tz="EST"))
colnames(AOdf)[colnames(AOdf) == "ti"] <- "Date.ti"
AOdf$Events <- factor(AOdf$Events, levels = unique(AOdf$Events))
AOdf$Event <- factor(AOdf$Event, levels = unique(AOdf$Event))
sum(is.na(AOdf$ti)) == 0
str(AOdf)
WaterSoils <- merge(AOdf, soils, by = "Date.ti", all = F)
waters = read.csv2("Data/WeeklyHydroContam_R.csv")
waters$ti <- as.POSIXct(strptime(waters$ti, "%Y-%m-%d %H:%M", tz="EST"))
colnames(waters)[colnames(waters) == "ti"] <- "Date.ti"
waters$Events <- factor(waters$Events, levels = unique(waters$Events))
waters$Event <- factor(waters$Event, levels = unique(waters$Event))
View(waters)
waters = read.csv2("Data/WeeklyHydroContam_R.csv")
waters$ti <- as.POSIXct(strptime(waters$ti, "%Y-%m-%d %H:%M", tz="EST"))
colnames(waters)[colnames(waters) == "ti"] <- "Date.ti"
waters$Events <- factor(waters$Events, levels = unique(waters$Events))
waters$Event <- factor(waters$Event, levels = unique(waters$Event))
dropWater <- c("N.X", "Markers" , "TimeDiff")
waters <- waters[ , !(names(waters) %in% dropWater)]
dropWater <- c("N.x", "Markers" , "TimeDiff", "se.d13C", "MES.mg.L")
waters <- waters[ , !(names(waters) %in% dropWater)]
dropWater <- c("N.x", "Markers" , "TimeDiff", "se.d13C", "MES.mg.L", "MES.sd")
waters <- waters[ , !(names(waters) %in% dropWater)]
dropWater <- c("N.x", "N.y", "Markers" , "TimeDiff", "se.d13C", "MES.mg.L", "MES.sd", "MO.mg.L", "filt.se.d13", "f.diss", "f.filt")
waters <- waters[ , !(names(waters) %in% dropWater)]
dropWater <- c("N.x", "N.y",
"Markers" , "TimeDiff",
"se.d13C", "MES.mg.L", "MES.sd", "MO.mg.L", "filt.se.d13", "f.diss", "f.filt",
"Appl.Mass.g",
"DissSmeto.mg", "DissSmeto.mg.SD",
"DissOXA.mg", "DissOXA.mg.SD",
"DissESA.mg", "DissESA.mg.SD")
waters <- waters[ , !(names(waters) %in% dropWater)]
dropWater <- c("N.x", "N.y",
"Markers" , "TimeDiff",
"se.d13C", "MES.mg.L", "MES.sd", "MO.mg.L", "filt.se.d13", "f.diss", "f.filt",
"Appl.Mass.g",
"DissSmeto.mg", "DissSmeto.mg.SD",
"DissOXA.mg", "DissOXA.mg.SD",
"DissESA.mg", "DissESA.mg.SD",
"FiltSmeto.mg", "DissSmeto.mg.SD",
"TotSMout.mg", "TotSMout.mg.SD",
"FracDiss", "FracFilt")
waters <- waters[ , !(names(waters) %in% dropWater)]
sum(is.na(waters$ti)) == 0
str(waters)
sum(is.na(waters$ti)) == 0
sum(is.na(waters$Date.ti)) == 0
str(waters)
soils = read.csv2("Data/MassBalance_R.csv",
na.strings=c('#DIV/0!', '', 'NA'), header = TRUE)
colnames(soils)[colnames(soils) == "ti"] <- "Date.ti"
soils$Date.ti <- as.POSIXct(strptime(soils$Date.ti,
"%Y-%m-%d %H:%M", tz="EST")) # csv typos, option 1
sum(is.na(soils$Date.ti)) == 0
dropSoil <- c("WeekSubWeek", "Event",
"B.diss", "B.filt", "CumOutDiss.g", "CumOutFilt.g", "CumOutAppMass.g",  "CumOutMEL.g.y",
"ID.N", "ID.T",  "Area.N", "Area.T", "Area.S",
"f.max.comp", "f.mean.comp", "f.min.comp", "ngC.SD","ngC.SE", "N_compsoil", "N_ngC")
soils <- soils[ , !(names(soils) %in% dropSoil)]
dropSoil <- c("WeekSubWeek", "Event",
"B.diss", "B.filt", "CumOutDiss.g", "CumOutFilt.g", "CumOutAppMass.g",  "CumOutMEL.g.y",
"ID.N", "ID.T",  "Area.N", "Area.T", "Area.S",
"comp.d13.SE.North", "comp.d13.SE.Talweg", "comp.d13.SE.South",
"f.max.comp", "f.mean.comp", "f.min.comp", "ngC.SD","ngC.SE", "N_compsoil", "N_ngC")
soils <- soils[ , !(names(soils) %in% dropSoil)]
dropSoil <- c("WeekSubWeek", "Event",
"B.diss", "B.filt", "CumOutDiss.g", "CumOutFilt.g", "CumOutAppMass.g",  "CumOutMEL.g.y",
"ID.N", "ID.T",  "Area.N", "Area.T", "Area.S",
"comp.d13C.SE.North", "comp.d13C.SE.Talweg", "comp.d13C.SE.South",
"f.max.comp", "f.mean.comp", "f.min.comp", "ngC.SD","ngC.SE", "N_compsoil", "N_ngC")
soils <- soils[ , !(names(soils) %in% dropSoil)]
dropSoil <- c("WeekSubWeek", "Event",
"B.diss", "B.filt", "CumOutDiss.g", "CumOutFilt.g", "CumOutAppMass.g",  "CumOutMEL.g",
"CumAppMass.g",
"ID.N", "ID.T",  "Area.N", "Area.T", "Area.S",
"comp.d13C.SE.North", "comp.d13C.SE.Talweg", "comp.d13C.SE.South",
"f.max.comp", "f.mean.comp", "f.min.comp", "ngC.SD","ngC.SE", "N_compsoil", "N_ngC")
soils <- soils[ , !(names(soils) %in% dropSoil)]
dropSoil <- c("WeekSubWeek", "Event",
"B.diss", "B.filt", "CumOutDiss.g", "CumOutFilt.g", "CumOutAppMass.g",  "CumOutMELsm.g",
"CumAppMass.g",
"ID.N", "ID.T",  "Area.N", "Area.T", "Area.S",
"comp.d13C.SE.North", "comp.d13C.SE.Talweg", "comp.d13C.SE.South",
"f.max.comp", "f.mean.comp", "f.min.comp", "ngC.SD","ngC.SE", "N_compsoil", "N_ngC")
soils <- soils[ , !(names(soils) %in% dropSoil)]
waters = read.csv2("Data/WeeklyHydroContam_R.csv")
waters$ti <- as.POSIXct(strptime(waters$ti, "%Y-%m-%d %H:%M", tz="EST"))
colnames(waters)[colnames(waters) == "ti"] <- "Date.ti"
waters$Events <- factor(waters$Events, levels = unique(waters$Events))
waters$Event <- factor(waters$Event, levels = unique(waters$Event))
dropWater <- c("N.x", "N.y",
"Markers" , "TimeDiff",
"se.d13C", "MES.mg.L", "MES.sd", "MO.mg.L", "filt.se.d13", "f.diss", "f.filt",
"Appl.Mass.g",
"DissSmeto.mg", "DissSmeto.mg.SD",
"DissOXA.mg", "DissOXA.mg.SD",
"DissESA.mg", "DissESA.mg.SD",
"FiltSmeto.mg", "DissSmeto.mg.SD",
"TotSMout.mg", "TotSMout.mg.SD",
"FracDiss", "FracFilt")
waters <- waters[ , !(names(waters) %in% dropWater)]
# Date conversion correct:
sum(is.na(waters$Date.ti)) == 0
str(waters)
WaterSoils <- merge(waters, soils, by = "Date.ti", all = F)
str(WaterSoils)
View(WaterSoils)
dropWater <- c("N.x", "N.y",
"Markers" , "TimeDiff",
"se.d13C", "MES.mg.L", "MES.sd", "MO.mg.L", "filt.se.d13C", "f.diss", "f.filt",
"Appl.Mass.g",
"DissSmeto.mg", "DissSmeto.mg.SD",
"DissOXA.mg", "DissOXA.mg.SD",
"DissESA.mg", "DissESA.mg.SD",
"FiltSmeto.mg", "DissSmeto.mg.SD",
"TotSMout.mg", "TotSMout.mg.SD",
"FracDiss", "FracFilt")
waters <- waters[ , !(names(waters) %in% dropWater)]
WaterSoils <- merge(waters, soils, by = "Date.ti", all = F)
str(WaterSoils)
soilGroups = read.csv2("Data/WeeklySoils_Rng.csv",
na.strings=c('#DIV/0!', '', 'NA'), header = TRUE)
head(soilGroups)
soilGroups = read.csv2("Data/WeeklySoils_Rng.csv",
na.strings=c('#DIV/0!', '', 'NA'), header = TRUE)
soilGroups$Date.ti <- as.POSIXct(strptime(soilGroups$Date.ti,
"%Y-%m-%d %H:%M", tz="EST")) # csv typos, option 1
sum(is.na(soilGroups$Date.ti)) == 0
